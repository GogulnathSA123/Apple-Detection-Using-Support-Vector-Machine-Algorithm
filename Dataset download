import cv2
import glob
import os

# Define the folder paths for both datasets
path_minne = '/content/drive/MyDrive/APPLE_DATASETS/REAL_MINNEAPPLE_SAMPLE'
path_fuji = '/content/drive/MyDrive/APPLE_DATASETS/REAL_FUJI_SAMPLE'

def load_dataset_universal(folder_path, dataset_name):
    print(f"Loading {dataset_name}...")

    # 1. Search for ALL image types
    # our datasets is a mix of JPG and PNG files. We check for all of them.
    extensions = ['*.jpg', '*.JPG', '*.png', '*.PNG', '*.jpeg', '*.JPEG']
    files = []

    for ext in extensions:
        search_pattern = os.path.join(folder_path, ext)
        # glob finds all files matching the pattern
        found = glob.glob(search_pattern)
        files.extend(found)

    loaded_images = []

    if len(files) == 0:
        print(f" ERROR: Still found 0 images in {folder_path}")
        return []

    # 2. Read and Convert images
    for file_path in files:
        img = cv2.imread(file_path)
        if img is not None:
            # OpenCV loads as BGR (Blue-Green-Red) by default.
            # We convert to RGB so colors look correct in our analysis.
            img_rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
            loaded_images.append(img_rgb)

    print(f" ->  Successfully loaded {len(loaded_images)} images.")
    return loaded_images

# 3. Execution: Load both datasets into lists
minne_images = load_dataset_universal(path_minne, "MinneApple")
fuji_images = load_dataset_universal(path_fuji, "Fuji-SfM")

print(f"\nFinal Status: MinneApple has {len(minne_images)} images. Fuji has {len(fuji_images)} images.")
